<!DOCTYPE html>
<html>
<head>
<title>beatenglish</title>
<link href="css/bootstrap.css" rel='stylesheet' type='text/css' />
<!-- jQuery (Bootstrap's JavaScript plugins) -->
<script src="js/jquery.min.js"></script>
<!-- Custom Theme files -->
<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
<!-- Custom Theme files -->
<style>
	*{
			margin: 0;
			padding: 0;
	}
	body, html{
			width: 100%;
			height: 100%;
	}
	#container{
			width: 100%;
			height: 100%;
			/*position: absolute;
			top: 0;
			bottom: 0;
			left: 0;
			right: 0;*/
			background: url(img/bg.jpg);
			position: relative;
	}
	#container .img{
			width: 125px;
			height: 125px;
			border: 5px solid #fff;
			box-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.5);
			position: absolute;
			top: -500px;
			left: -500px;
			transition: all 1s ease;
			cursor: pointer;
	}
	#container .img span{
			width: 100%;
			height: 100%;
			display: block;
			opacity: 0;
			transition: all 1s ease;
	}
	#next, #prev{
			width: 60px;
			height: 60px;
			background-color: #ffffff;
			background-repeat: no-repeat;
			background-position: center;
			position: absolute;
			top: 50%;
			margin-top: -30px;
			cursor: pointer;
			display: none;
	}
	#next{
			background-image: url(img/next.png);
			right: 0;
			border-radius: 8px 0 0 8px;
	}
	#prev{
			background-image: url(img/prev.png);
			left: 0;
			border-radius: 0 8px 8px 0;
	}
</style> 
 <meta name="viewport"  content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="彼特美语，beatenglish，美语，少儿，西安" />
<meta name="descrition" content="彼特美语（Beat English）是一个有创造力的少儿英语培训机构，主要针对3——12周岁的少儿，其教学团队总结并整理出一套完整的，
有特色的教学体系，其中少儿双语主持课程深受广大家长和学生的喜欢。2017年11月，彼特美语正式入驻西安，希望与西安的孩子们一起击败英语。"/>
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
</head>
<body>
<!---->
<div class="header">
	 <div class="container">
		 <div class="header-top">
			 <div class="logo">
				 <a href="index.html"><h1>BeatEnglish <span>Organization</span></h1></a>
			 </div>
			 <div class="hdr-address">
				 <div class="address1">
					 <h5> 西安市碑林区长安大厦B座803</h5>
				 </div>
				 <div class="call">
					 <h5>029-85350677</h5>
					 <p>Call me</p>
				 </div>
				 <div class="clearfix"></div>
			 </div>
			 <div class="search">
				 <div class="search-box">
					 <div id="sb-search" class="sb-search">
						  <form>
							<input class="sb-search-input" placeholder="search term..." type="search" name="search" id="search">
							<input class="sb-search-submit" type="submit" value="">
							<span class="sb-icon-search"> </span>
						 </form>
					 </div>
				 </div>
			 </div>
			 <div class="clearfix"> </div>
			 <!-- search-scripts -->
			<script src="js/classie.js"></script>
			<script src="js/uisearch.js"></script>
				<script>
					new UISearch( document.getElementById( 'sb-search' ) );
				</script>
			<!-- //search-scripts -->
		 </div>
		 <div class="top-menu">
			 <span class="menu">MENU</span>
			 <ul>
			 <li class="active"><a href="index.html"><span class="glyphicon glyphicon-home" aria-hidden="true"></span>Home</a></li>
			 <li><a href="about.html"><span class="glyphicon glyphicon-user" aria-hidden="true"></span>About</a></li>
			 <li><a href="shortcodes.html"><span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>Shortcodes</a></li>
			 <li><a href="picture.html"><span class="glyphicon glyphicon-picture" aria-hidden="true"></span>Picture</a></li>
			 <li><a href="contact.html"><span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>Contact</a></li>
			 </ul>
		 </div>
		 <!-- script-for-menu -->
		 <script>					
					$("span.menu").click(function(){
						$(".top-menu ul").slideToggle("slow" , function(){
						});
					});
		 </script>
		 <!-- script-for-menu -->	
		 <div class="clearfix"></div>
	 </div>
</div>
<!---->
	 

<div id="container"></div>
<div id="next"></div>
<div id="prev"></div>

	
			 
<div class="copywrite">
	 <div class="container">
			 <p> &copy; 2017.BeatEnglish 彼特美语 </p>
	 </div>
</div>
<script>
	(function(){
			var ROW = 4, COL = 5, NUM = ROW * COL, BIG_W = 750, BIG_H = 500, THUMB_W = THUMB_H = 125;
			var oContainer = document.getElementById("container");
			var oPrev = document.getElementById("prev");
			var oNext = document.getElementById("next");
			var count = 0;//计数器，记录当前图片加载成功的数量
			var aImg;
			var fGapCol;
			var fGapRow;
			var iImgWidth;
			var iImgHeight;
			//图片预加载
			for(var i=0; i<NUM; i++){
					var oBigImg = new Image();
					oBigImg.onload = function(){
							count++;
							if(count == NUM * 2){
									loadSuccess();
							}
					};
					oBigImg.src = "img/"+ (i + 1) +".jpg";

					var oThumbImg = new Image();
					oThumbImg.onload = function(){
							count++;
							if(count == NUM * 2){
									loadSuccess();
							}
					};
					oThumbImg.src = "img/thumbs/"+ (i + 1) +".jpg";
			}

			var index = 0;//1~24
			//图片预加载成功以后执行的函数
			function loadSuccess(){
					//创建24个div,并把设置背景图片
					for(var i=0; i<ROW; i++){
							for(var j=0; j<COL; j++){
									index++;
									var oDiv = document.createElement("div");
									oDiv.className = "img";
									oDiv.style.backgroundImage = "url(img/thumbs/"+ index +".jpg)";
									//给div对象自定义属性pos，保存坐标
									oDiv.pos = {
											col : j,
											row : i
									};
									oDiv.index = index;
									oDiv.innerHTML = "<span></span>";
									oContainer.appendChild(oDiv);
							}
					}
					//计算每个div的位置
					aImg = oContainer.getElementsByTagName("div");
					iImgWidth = aImg[0].offsetWidth;
					iImgHeight = aImg[0].offsetHeight;
					fGapCol = (oContainer.offsetWidth - iImgWidth * COL) / (COL + 1);
					fGapRow = (oContainer.offsetHeight - iImgHeight * ROW) / (ROW + 1);
					for(var i=0; i<NUM; i++){
							aImg[i].style.left = (fGapCol + iImgWidth) * aImg[i].pos.col + fGapCol + "px";
							aImg[i].style.top = (fGapRow + iImgHeight) * aImg[i].pos.row + fGapRow + "px";
							aImg[i].style.transform = "rotate("+ (Math.random() * 40 - 20) +"deg)";
							aImg[i].style.transitionDelay = (NUM - i) * 100 + "ms";
					}
			}

			//定义标志位，表示当前是散开还是合并，true表示散开要合并，false表示合并要散开
			var bFlag = true;
			var fBigGapCol = (oContainer.offsetWidth - BIG_W) / 2;
			var fBigGapRow = (oContainer.offsetHeight - BIG_H) / 2;

			//利用事件委托，把子元素事件委托给container绑定
			oContainer.onclick = function(e){
					//e.target => container/span/div
					if(this != e.target){
							if(bFlag){//当前是散开的，要合并
									for(var i=0; i<aImg.length; i++){
											aImg[i].style.top = fBigGapRow + THUMB_H * aImg[i].pos.row + "px";
											aImg[i].style.left = fBigGapCol + THUMB_W * aImg[i].pos.col + "px";
											aImg[i].style.borderWidth = "1px";
											aImg[i].style.transform = "rotate(0deg)";
											aImg[i].style.transitionDelay = "0ms";
											var oSpan = aImg[i].getElementsByTagName("span")[0];
											oSpan.style.opacity = 1;
											if(e.target.className == "img"){//div
													index = e.target.index;
											}else{//span
													index = e.target.parentNode.index;
											}
											oSpan.style.backgroundImage = "url(img/"+ index +".jpg)";
											oSpan.style.backgroundPosition = -THUMB_W * aImg[i].pos.col + "px "+ (-THUMB_H * aImg[i].pos.row) +"px";
									}
									oPrev.style.display = oNext.style.display = "block";
							}else{//当前是合并的，要散开
									for(var i=0; i<aImg.length; i++){
											aImg[i].style.left = (fGapCol + iImgWidth) * aImg[i].pos.col + fGapCol + "px";
											aImg[i].style.top = (fGapRow + iImgHeight) * aImg[i].pos.row + fGapRow + "px";
											aImg[i].style.transform = "rotate("+ (Math.random() * 40 - 20) +"deg)";
											aImg[i].style.borderWidth = "5px";
											var oSpan = aImg[i].getElementsByTagName("span")[0];
											oSpan.style.opacity = 0;
											oSpan.style.transitionDelay = "0ms";
									}
									oPrev.style.display = oNext.style.display = "none";
							}
							bFlag = !bFlag;
					}
			};

			oPrev.onclick = oNext.onclick = function(){
					if(this === oPrev){
							index--;
							if(index == 0){
									index = NUM;
							}
					}else{
							index++;
							if(index == NUM + 1){
									index = 1;
							}
					}

					var arr = [];
					for(var i=0; i<NUM; i++){
							arr.push(i);
					}
					arr.sort(function(){
							return Math.random() - 0.5;
					});

					for(var i=0; i<aImg.length; i++){
							var oSpan = aImg[arr[i]].getElementsByTagName("span")[0];
							oSpan.style.backgroundImage = "url(img/"+ index +".jpg)";
							oSpan.style.transitionDelay = (i + 2) * 50 + "ms";
					}
			};
	})();


</script>
</body>
</html>